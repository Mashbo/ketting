var Ketting=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=9)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=function(t,e){if("undefined"!=typeof URL)return new URL(e,t).toString();const r=document,n=r.getElementsByTagName("base")[0],i=n&&n.href,o=r.head||r.getElementsByTagName("head")[0],s=n||o.appendChild(r.createElement("base")),a=r.createElement("a");s.href=t,a.href=e;const u=a.href;return n?n.href=i:o.removeChild(s),u}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(11)),o=r(0);e.default=class{constructor(t){this.templated=!1,this.title=null,this.type=null;for(const e of["baseHref","href","name","rel","templated","title","type"])t[e]&&(this[e]=t[e])}resolve(){return o.resolve(this.baseHref,this.href)}expand(t){if(this.templated){const e=i.default.parse(this.href).expand(t);return o.resolve(this.baseHref,e)}return o.resolve(this.baseHref,this.href)}}},function(t,e,r){"use strict";e.decode=e.parse=r(21),e.encode=e.stringify=r(22)},function(t,e,r){"use strict"},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const o=n(r(10)),s=n(r(15)),a=n(r(6)),u=i(r(26)),h=i(r(8));r(3);const c=r(27),f=r(0);e.default=class{constructor(t,e){void 0===e&&(e={}),this.resourceCache={},this.contentTypes=[{mime:"application/hal+json",representor:"hal",q:"1.0"},{mime:"application/json",representor:"hal",q:"0.9"},{mime:"text/html",representor:"html",q:"0.8"}],e.auth&&(this.auth=e.auth,"oauth2"===e.auth.type&&(this.oauth2Helper=new c.OAuth2Helper(e.auth))),e.fetchInit&&(this.fetchInit=e.fetchInit),this.bookMark=t}follow(t,e){return this.getResource().follow(t,e)}getResource(t,e){return void 0===t&&(t=""),void 0===(t=f.resolve(this.bookMark,t))&&(e=!1),this.resourceCache[t]&&!e||(this.resourceCache[t]=new a.default(this,t)),this.resourceCache[t]}fetch(t,e){const n=h.createFetchRequest(t,e,this.fetchInit);if(n.headers.has("User-Agent")||n.headers.set("User-Agent","Ketting/"+r(35).version),!n.headers.has("Authorization")&&this.auth)switch(this.auth.type){case"basic":n.headers.set("Authorization","Basic "+u.encode(this.auth.userName+":"+this.auth.password));break;case"bearer":n.headers.set("Authorization","Bearer "+this.auth.token);break;case"oauth2":return this.oauth2Helper.fetch(n)}return fetch(n)}getRepresentor(t){-1!==t.indexOf(";")&&(t=t.split(";")[0]),t=t.trim();const e=this.contentTypes.find(e=>e.mime===t);if(!e)throw new Error("Could not find a representor for contentType: "+t);switch(e.representor){case"html":return s.default;case"hal":return o.default;default:throw new Error("Unknown representor: "+e.representor)}}getAcceptHeader(){return this.contentTypes.map(t=>{let e=t.mime;return t.q&&(e+=";q="+t.q),e}).join(", ")}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,r){this.uri=t,this.contentType=e,this.body=r,this.links=[],this.embedded={}}}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(16)),o=n(r(24)),s=n(r(25)),a=n(r(1)),u=r(8),h=r(0);e.default=class{constructor(t,e,r=null){this.inFlightRefresh=null,this.client=t,this.uri=e,this.repr=null,this.contentType=r}async get(){return(await this.representation()).body}async put(t){const e=this.contentType||this.client.contentTypes[0].mime,r={method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":e,Accept:this.contentType?this.contentType:this.client.getAcceptHeader()}};await this.fetchAndThrow(r),this.repr=null}async delete(){await this.fetchAndThrow({method:"DELETE"}),this.repr=null}async post(t){const e=this.contentType||this.client.contentTypes[0].mime,r=await this.fetchAndThrow({method:"POST",body:JSON.stringify(t),headers:{"Content-Type":e}});return r.headers.has("location")?this.client.getResource(h.resolve(this.uri,r.headers.get("location"))):null}async patch(t){await this.fetchAndThrow({method:"PATCH",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}),this.repr=null}async refresh(){let t,e;this.inFlightRefresh?[t,e]=await this.inFlightRefresh:(this.inFlightRefresh=this.fetchAndThrow({method:"GET",headers:{Accept:this.contentType?this.contentType:this.client.getAcceptHeader()}}).then(e=>(t=e).text()).then(r=>[t,e=r]),await this.inFlightRefresh,this.inFlightRefresh=null);const r=t.headers.get("Content-Type");if(!r)throw new Error("Server did not respond with a Content-Type header");this.repr=new(this.client.getRepresentor(r))(this.uri,r,e),this.contentType||(this.contentType=r);const n=t.headers.get("Link");if(n)for(const t of i.default.parse(n).refs)for(const e of t.rel.split(" "))this.repr.links.push(new a.default({rel:e,baseHref:this.uri,href:t.uri}));for(const t of Object.keys(this.repr.embedded))this.client.getResource(t).repr=new(this.client.getRepresentor(r))(t,r,this.repr.embedded[t]);return this.repr.body}async links(t){const e=await this.representation();return t?e.links.filter(e=>e.rel===t):e.links}follow(t,e){return new o.default(async(r,n)=>{try{const i=await this.links(t);let o;if(0===i.length)throw new Error("Relation with type "+t+" not found on resource "+this.uri);o=i[0].templated&&e?i[0].expand(e):i[0].resolve();const s=this.client.getResource(o);i[0].type&&(s.contentType=i[0].type),r(s)}catch(t){n(t)}})}async followAll(t){return(await this.links(t)).map(t=>{const e=this.client.getResource(t.resolve());return t.type&&(e.contentType=t.type),e})}async representation(){return this.repr||await this.refresh(),this.repr}fetch(t,e){let r=null,n={};if(void 0===t)r=this.uri;else if("string"==typeof t)r=h.resolve(this.uri,t);else if(t instanceof Request)r=h.resolve(this.uri,t.url),n.method=t.method,n.headers=new Headers(t.headers),n.body=t.body,n.mode=t.mode,n.credentials=t.credentials,n.cache=t.cache,n.redirect=t.redirect,n.referrer=t.referrer,n.integrity=t.integrity;else{if(!(t instanceof Object))throw new TypeError("When specified, input must be a string, Request object or a key-value object");r=this.uri,n=t}if(e){for(const t of Object.keys(e))"headers"!==t&&(n[t]=e[t]);n.headers=u.mergeHeaders([n.headers,e.headers])}const i=new Request(r,n);return this.client.fetch(i)}async fetchAndThrow(t,e){const r=await this.fetch(t,e);if(r.ok)return r;throw await s.default(r)}}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";function n(t){const e=new Headers;for(const r of t)if(r instanceof Headers)for(const t of r.keys())e.set(t,r.get(t));else if(r)for(const t of Object.keys(r))e.set(t,r[t]);return e}Object.defineProperty(e,"__esModule",{value:!0}),r(3),e.createFetchRequest=function(t,e,r){const i={};return e?Object.assign(i,r,e):Object.assign(i,r),i.headers=n([r?r.headers:null,t instanceof Request?t.headers:null,e&&e.headers?e.headers:null]),new Request(t,i)},e.mergeHeaders=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4);e.default=n.default;var i=r(4);e.Ketting=i.default;var o=r(6);e.Resource=o.default},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(1)),o=r(0),s=n(r(5));e.default=class extends s.default{constructor(t,e,r){super(t,e,r),this.body="string"==typeof r?JSON.parse(r):r,void 0!==this.body._links&&a(this),void 0!==this.body._embedded&&h(this),delete this.body._links,delete this.body._embedded}};const a=t=>{for(const e of Object.keys(t.body._links)){let r=t.body._links[e];Array.isArray(r)||(r=[r]),u(t,e,r)}},u=(t,e,r)=>{for(const n of r)t.links.push(new i.default({rel:e,baseHref:t.uri,href:n.href,title:n.title,type:n.type,templated:n.templated,name:n.name}))},h=t=>{for(const e of Object.keys(t.body._embedded)){let r=t.body._embedded[e];Array.isArray(r)||(r=[r]);for(const n of r){const r=o.resolve(t.uri,n._links.self.href);t.links.find(t=>t.rel===e&&n._links.self.href===t.href)||t.links.push(new i.default({rel:e,baseHref:t.uri,href:n._links.self.href})),t.embedded[r]=n}}}},function(t,e,r){t.exports=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,n){var i={uriTemplate:function(){var t,e,r;r=o,t=[],null===(e=m())&&(e=c());for(;null!==e;)t.push(e),null===(e=m())&&(e=c());null!==t&&(t=function(t,e){return new b(e)}(0,t));null===t&&(o=r);return t},expression:c,op:f,pathExpression:function(){var t;"{/"===e.substr(o,2)?(t="{/",o+=2):(t=null,0===s&&h('"{/"'));return t},paramList:l,param:p,cut:d,listMarker:y,substr:g,nonexpression:m,extension:v};if(void 0!==n){if(void 0===i[n])throw new Error("Invalid rule name: "+t(n)+".")}else n="uriTemplate";var o=0,s=0,a=0,u=[];function h(t){o<a||(o>a&&(a=o,u=[]),u.push(t))}function c(){var t,r,n,i,a,u;return a=o,u=o,123===e.charCodeAt(o)?(t="{",o++):(t=null,0===s&&h('"{"')),null!==t&&null!==(r=f())&&null!==(n=l())?(125===e.charCodeAt(o)?(i="}",o++):(i=null,0===s&&h('"}"')),null!==i?t=[t,r,n,i]:(t=null,o=u)):(t=null,o=u),null!==t&&(t=function(t,e,r){return _(e,r)}(0,t[1],t[2])),null===t&&(o=a),t}function f(){var t;return/^[\/;:.?&+#]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===s&&h("[\\/;:.?&+#]")),null===t&&(t=""),t}function l(){var t,r,n,i,a,u,c,f;if(a=o,u=o,null!==(t=p())){for(r=[],c=o,f=o,44===e.charCodeAt(o)?(n=",",o++):(n=null,0===s&&h('","')),null!==n&&null!==(i=p())?n=[n,i]:(n=null,o=f),null!==n&&(n=n[1]),null===n&&(o=c);null!==n;)r.push(n),c=o,f=o,44===e.charCodeAt(o)?(n=",",o++):(n=null,0===s&&h('","')),null!==n&&null!==(i=p())?n=[n,i]:(n=null,o=f),null!==n&&(n=n[1]),null===n&&(o=c);null!==r?t=[t,r]:(t=null,o=u)}else t=null,o=u;return null!==t&&(t=function(t,e,r){return r.unshift(e),r}(0,t[0],t[1])),null===t&&(o=a),t}function p(){var t,r,n,i,a;for(i=o,a=o,t=[],/^[a-zA-Z0-9_.%]/.test(e.charAt(o))?(r=e.charAt(o),o++):(r=null,0===s&&h("[a-zA-Z0-9_.%]"));null!==r;)t.push(r),/^[a-zA-Z0-9_.%]/.test(e.charAt(o))?(r=e.charAt(o),o++):(r=null,0===s&&h("[a-zA-Z0-9_.%]"));return null!==t?(null===(r=d())&&(r=y()),null!==(r=null!==r?r:"")&&null!==(n=null!==(n=v())?n:"")?t=[t,r,n]:(t=null,o=a)):(t=null,o=a),null!==t&&(t=function(t,e,r,n){return r=r||{},{name:e.join(""),explode:r.listMarker,cut:r.cut,extended:n}}(0,t[0],t[1],t[2])),null===t&&(o=i),t}function d(){var t,e;return e=o,null!==(t=g())&&(t={cut:t}),null===t&&(o=e),t}function y(){var t,r;return r=o,42===e.charCodeAt(o)?(t="*",o++):(t=null,0===s&&h('"*"')),null!==t&&(t={listMarker:t}),null===t&&(o=r),t}function g(){var t,r,n,i,a;if(i=o,a=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===s&&h('":"')),null!==t){if(/^[0-9]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===s&&h("[0-9]")),null!==n)for(r=[];null!==n;)r.push(n),/^[0-9]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===s&&h("[0-9]"));else r=null;null!==r?t=[t,r]:(t=null,o=a)}else t=null,o=a;return null!==t&&(t=function(t,e){return parseInt(e.join(""))}(0,t[1])),null===t&&(o=i),t}function m(){var t,r,n;if(n=o,/^[^{]/.test(e.charAt(o))?(r=e.charAt(o),o++):(r=null,0===s&&h("[^{]")),null!==r)for(t=[];null!==r;)t.push(r),/^[^{]/.test(e.charAt(o))?(r=e.charAt(o),o++):(r=null,0===s&&h("[^{]"));else t=null;return null!==t&&(t=t.join("")),null===t&&(o=n),t}function v(){var t,r,n,i,a;if(i=o,a=o,40===e.charCodeAt(o)?(t="(",o++):(t=null,0===s&&h('"("')),null!==t){if(/^[^)]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===s&&h("[^)]")),null!==n)for(r=[];null!==n;)r.push(n),/^[^)]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===s&&h("[^)]"));else r=null;null!==r?(41===e.charCodeAt(o)?(n=")",o++):(n=null,0===s&&h('")"')),null!==n?t=[t,r,n]:(t=null,o=a)):(t=null,o=a)}else t=null,o=a;return null!==t&&(t=t[1].join("")),null===t&&(o=i),t}var w=r(12),b=w.Template,_=w.expression,A=i[n]();if(null===A||o!==e.length){var T=Math.max(o,a),x=T<e.length?e.charAt(T):null,E=function(){for(var t=1,r=1,n=!1,i=0;i<Math.max(o,a);i++){var s=e.charAt(i);"\n"===s?(n||t++,r=1,n=!1):"\r"===s||"\u2028"===s||"\u2029"===s?(t++,r=1,n=!0):(r++,n=!1)}return{line:t,column:r}}();throw new this.SyntaxError(function(t){t.sort();for(var e=null,r=[],n=0;n<t.length;n++)t[n]!==e&&(r.push(t[n]),e=t[n]);return r}(u),x,T,E.line,E.column)}return A},toSource:function(){return this._source},SyntaxError:function(e,r,n,i,o){this.name="SyntaxError",this.expected=e,this.found=r,this.message=function(e,r){var n;switch(e.length){case 0:n="end of input";break;case 1:n=e[0];break;default:n=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return"Expected "+n+" but "+(r?t(r):"end of input")+" found."}(e,r),this.offset=n,this.line=i,this.column=o}};return e.SyntaxError.prototype=Error.prototype,e}()},function(t,e,r){(function(){var e,n,i,o,s,a,u,h,c,f,l,p=function(t,e){return function(){return t.apply(e,arguments)}},d={}.hasOwnProperty,y=function(t,e){for(var r in e)d.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};l=r(13),f=f=function(){function t(t){var e,r=this;this.expressions=[],this.prefix="string"==typeof t[0]?t.shift():"",e=0,t.forEach(function(t){switch(typeof t){case"object":return r.expressions[e++]=t;case"string":return r.expressions[e-1].suffix=t}})}return t.prototype.expand=function(t){return this.prefix+this.expressions.map(function(e){return e.expand(t)}).join("")},t.prototype.toString=function(){return this.prefix+this.expressions.join("")},t.prototype.toJSON=function(){return this.toString()},t}(),c=function(){var t;function e(t){this.params=t,this.explodeObject=p(this.explodeObject,this),this.explodeArray=p(this.explodeArray,this),this._expandPair=p(this._expandPair,this),this.stringifySingle=p(this.stringifySingle,this),this.encode=p(this.encode,this),null==this.params&&(this.params=[]),this.suffix=""}return e.prototype.first="",e.prototype.sep=",",e.prototype.named=!1,e.prototype.empty="",e.prototype.allow="U",e.prototype.encode=function(t){return l[this.allow](t)},e.prototype.stringifySingle=function(t,e){var r,n,i;if("string"===(n=typeof e)||"boolean"===n||"number"===n)return e=e.toString(),this.encode(e.substring(0,t.cut||e.length));if(Array.isArray(e)){if(t.cut)throw new Error("Prefixed Values do not support lists. Check "+t.name);return e.map(this.encode).join(",")}if(t.cut)throw new Error("Prefixed Values do not support maps. Check "+t.name);return function(){var t;for(r in t=[],e)i=e[r],t.push([r,i].map(this.encode).join(","));return t}.call(this).join(",")},e.prototype.expand=function(e){var r,n,i=this;return(n=(r=t(this.params,e)).map(function(t){return i._expandPair.apply(i,t)}).join(this.sep))?this.first+n+this.suffix:this.empty&&r.length?this.empty+this.suffix:this.suffix},t=function(t,e){return t.map(function(t){return[t,e[t.name]]}).filter(function(t){var e,r;switch(typeof(r=t[1])){case"undefined":return!1;case"object":for(e in Array.isArray(r)&&r.length,r)if(r[e])return!0;return!1;default:return!0}})},e.prototype._expandPair=function(t,e){return t.name,t.explode?Array.isArray(e)?this.explodeArray(t,e):"string"==typeof e?this.stringifySingle(t,e):this.explodeObject(e):this.stringifySingle(t,e)},e.prototype.explodeArray=function(t,e){return e.map(this.encode).join(this.sep)},e.prototype.explodeObject=function(t){var e,r,n,i,o,s;for(e in r=[],t)if(n=t[e],e=this.encode(e),Array.isArray(n))for(o=0,s=n.length;o<s;o++)i=n[o],r.push([e,this.encode(i)]);else r.push([e,this.encode(n)]);return r.map(function(t){return t.join("=")}).join(this.sep)},e.prototype.toString=function(){var t;return t=this.params.map(function(t){return t.name+t.explode}).join(","),"{"+this.first+t+"}"+this.suffix},e.prototype.toJSON=function(){return this.toString()},e}(),s=function(t){function e(){return this.explodeArray=p(this.explodeArray,this),this.stringifySingle=p(this.stringifySingle,this),e.__super__.constructor.apply(this,arguments)}return y(e,c),e.prototype.stringifySingle=function(t,r){return r=(r=e.__super__.stringifySingle.apply(this,arguments))?"="+r:this.empty,""+t.name+r},e.prototype.explodeArray=function(t,e){var r=this;return e.map(function(e){return t.name+"="+r.encode(e)}).join(this.sep)},e}(),h=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,c),e.prototype.encode=function(t){return l["U+R"](t)},e.prototype.toString=function(){return"{+"+e.__super__.toString.apply(this,arguments).substring(1)},e}(),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,c),e.prototype.first="#",e.prototype.empty="#",e.prototype.encode=function(t){return l["U+R"](t)},e}(),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,c),e.prototype.first=".",e.prototype.sep=".",e.prototype.empty=".",e}(),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,c),e.prototype.first="/",e.prototype.sep="/",e}(),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,s),e.prototype.first=";",e.prototype.sep=";",e}(),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,s),e.prototype.first="?",e.prototype.sep="&",e.prototype.empty="=",e}(),e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,n),e.prototype.first="&",e}(),t.exports={Template:f,SimpleExpression:c,NamedExpression:s,ReservedExpression:h,FragmentExpression:i,LabelExpression:o,PathSegmentExpression:u,PathParamExpression:a,FormStartExpression:n,FormContinuationExpression:e,expression:function(t,r){return new(function(){switch(t){case"":return c;case"+":return h;case"#":return i;case".":return o;case"/":return u;case";":return a;case"?":return n;case"&":return e}}())(r)}}}).call(this)},function(t,e,r){(function(){var t;t=r(14),e.U=t(/[^\w~.-]/g),e["U+R"]=t(/[^\w.~:\/\?#\[\]@!\$&'()*+,;=%-]|%(?!\d\d)/g)}).call(this)},function(t,e){t.exports=function(t){return t=t||/\W/g,function(e){return(e=String(e)).replace(t,function(t){var e=t[0].charCodeAt(0),r=[];return e<128?r.push(e):128<=e&&e<2048?(r.push(e>>6|192),r.push(63&e|128)):(r.push(e>>12|224),r.push(e>>6&63|128),r.push(63&e|128)),r.map(function(t){return"%"+t.toString(16).toUpperCase()}).join("")})}}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(1)),o=n(r(5));function s(t,e){for(const r of e){const e=r.getAttribute("rel"),n=r.getAttribute("href"),o=r.getAttribute("type")||void 0;if(e&&n)for(const r of e.split(" ")){const e=new i.default({rel:r,baseHref:t.uri,href:n,type:o});t.links.push(e)}}}e.default=class extends o.default{constructor(t,e,r){super(t,e,r);const n=(new DOMParser).parseFromString(r,"text/html");s(this,n.getElementsByTagName("link")),s(this,n.getElementsByTagName("a"))}}},function(t,e,r){(function(e){var n=r(2),i=r(23);function o(t){if(!(this instanceof o))return new o(t);this.refs=[]}o.pattern=/(?:\<([^\>]+)\>)((\s*;\s*([a-z\*]+)=(("[^"]+")|('[^']+')|([^\,\;]+)))*)(\s*,\s*|$)/gi,o.attrPattern=/([a-z\*]+)=(?:(?:"([^"]+)")|(?:'([^']+)')|([^\,\;]+))/gi,o.isCompatibleEncoding=function(t){return/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i.test(t)},o.formatExtendedAttribute=function(t,r){var i=(r.encoding||"utf-8").toUpperCase();return t+"="+i+"'"+(r.language||"en")+"'"+(e.isBuffer(r.value)&&o.isCompatibleEncoding(i)?r.value.toString(i):e.isBuffer(r.value)?r.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):n.escape(r.value))},o.formatAttribute=function(t,e){return/\*$/.test(t)||"string"!=typeof e?o.formatExtendedAttribute(t,e):(/[^a-z]/i.test(e)&&(e='"'+(e=n.escape(e).replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"))+'"'),t+"="+e)},o.parseExtendedValue=function(t){var e=/([^']+)?(?:'([^']+)')?(.+)/.exec(t);return{language:e[2].toLowerCase(),encoding:o.isCompatibleEncoding(e[1])?null:e[1].toLowerCase(),value:o.isCompatibleEncoding(e[1])?n.unescape(e[3]):e[3]}},o.setAttr=function(t,e,r){return"rel"===e&&null!=t[e]?t:(Array.isArray(t[e])?t[e].push(r):null!=t[e]?t[e]=[t[e],r]:t[e]=r,t)},o.parseParams=function(t,e){var r={},n=/(.+)\?(.+)/gi.exec(e);if(!n)return t;n=n[2].split("&");for(var i=0;i<n.length;i++){var s=n[i].split("=");r[s[0]]=s[1]}return o.setAttr(t,"params",r),t},o.parseAttrs=function(t,e){var r=null,i="",s="",a="",u=/<(.*)>;\s*(.*)/gi.exec(e);for(u&&(a=u[2],t=o.parseParams(t,u[1]));r=o.attrPattern.exec(a);)i=r[1].toLowerCase(),s=r[4]||r[3]||r[2],/\*$/.test(i)?o.setAttr(t,i,o.parseExtendedValue(s)):/%/.test(s)?o.setAttr(t,i,n.unescape(s)):o.setAttr(t,i,s);return t},o.parse=function(t){return(new o).parse(t)},o.prototype={constructor:o,rel:function(t){for(var e=[],r=0;r<this.refs.length;r++)this.refs[r].rel===t&&e.push(this.refs[r]);return e},get:function(t,e){t=t.toLowerCase();for(var r=[],n=0;n<this.refs.length;n++)this.refs[n][t]===e&&r.push(this.refs[n]);return r},set:function(t){return this.refs.push(t),this},has:function(t,e){return null!=this.get(t,e)},parse:function(t){t=i(t).replace(/\r?\n[\x20\x09]+/g,"");for(var e=null;e=o.pattern.exec(t);){var r=o.parseAttrs({uri:e[1]},e[0]);this.refs.push(r)}return this},toString:function(){for(var t=[],e="",r=null,n=0;n<this.refs.length;n++)r=this.refs[n],e=Object.keys(this.refs[n]).reduce(function(t,e){return"uri"===e?t:t+"; "+o.formatAttribute(e,r[e])},"<"+r.uri+">"),t.push(e);return t.join(", ")}},t.exports=o}).call(this,r(17).Buffer)},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(18),i=r(19),o=r(20);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return h(this,t,e,r)}function h(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=l(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),i=(t=a(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|p(e.length);return 0===(t=a(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?a(t,0):l(t,e);if("Buffer"===e.type&&o(e.data))return l(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(c(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function l(t,e){var r=e.length<0?0:0|p(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return D(t).length;default:if(n)return z(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var c=-1;for(o=r;o<a;o++)if(h(t,o)===h(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var f=!0,l=0;l<u;l++)if(h(t,o+l)!==h(e,l)){f=!1;break}if(f)return o}return-1}function v(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function w(t,e,r,n){return N(z(e,t.length-r),t,r,n)}function b(t,e,r,n){return N(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function _(t,e,r,n){return b(t,e,r,n)}function A(t,e,r,n){return N(D(e),t,r,n)}function T(t,e,r,n){return N(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function x(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function E(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,h=t[i],c=null,f=h>239?4:h>223?3:h>191?2:1;if(i+f<=r)switch(f){case 1:h<128&&(c=h);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&h)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&h)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=f}return function(t){var e=t.length;if(e<=k)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=k));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return h(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return c(e),e<=0?a(t,e):void 0!==r?"string"==typeof n?a(t,e).fill(r,n):a(t,e).fill(r):a(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,r);case"utf8":case"utf-8":return E(this,e,r);case"ascii":return j(this,e,r);case"latin1":case"binary":return O(this,e,r);case"base64":return x(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var o=i-n,s=r-e,a=Math.min(o,s),h=this.slice(n,i),c=t.slice(e,r),f=0;f<a;++f)if(h[f]!==c[f]){o=h[f],s=c[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return w(this,t,e,r);case"ascii":return b(this,t,e,r);case"latin1":case"binary":return _(this,t,e,r);case"base64":return A(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function j(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function O(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function P(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=Y(t[o]);return i}function R(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function S(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function U(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function C(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function I(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function B(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(t,e,r,n,o){return o||B(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function q(t,e,r,n,o){return o||B(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||S(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||S(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||S(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||S(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||S(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||S(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||S(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||S(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||S(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||S(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||S(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||S(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||S(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||S(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||S(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||S(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||S(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||S(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||U(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||U(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);U(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);U(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return M(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return M(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return q(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return q(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=u.isBuffer(t)?t:z(new u(t,n).toString()),a=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function D(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(L,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function N(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(7))},function(t,e,r){"use strict";e.byteLength=function(t){var e=h(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){for(var e,r=h(t),n=r[0],s=r[1],a=new o(function(t,e,r){return 3*(e+r)/4-r}(0,n,s)),u=0,c=s>0?n-4:n,f=0;f<c;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;2===s&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,a[u++]=255&e);1===s&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e);return a},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(f(t,s,s+16383>a?a:s+16383));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function f(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(c(n));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,h=u>>1,c=-7,f=r?i-1:0,l=r?-1:1,p=t[e+f];for(f+=l,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+t[e+f],f+=l,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+f],f+=l,c-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=h}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,h=8*o-i-1,c=(1<<h)-1,f=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?l/u:l*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[r+p]=255&s,p+=d,s/=256,h-=8);t[r+p-d]|=128*y}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var h=t.length;u>0&&h>u&&(h=u);for(var c=0;c<h;++c){var f,l,p,d,y=t[c].replace(a,"%20"),g=y.indexOf(r);g>=0?(f=y.substr(0,g),l=y.substr(g+1)):(f=y,l=""),p=decodeURIComponent(f),d=decodeURIComponent(l),n(s,p)?i(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),function(s){var a=encodeURIComponent(n(s))+r;return i(t[s])?o(t[s],function(t){return a+encodeURIComponent(n(t))}).join(e):a+encodeURIComponent(n(t[s]))}).join(e):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e){t.exports=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t){this.realPromise=new Promise(t)}then(t,e){return this.realPromise.then(t,e)}catch(t){return this.realPromise.catch(t)}follow(t,e){return new n((r,n)=>{this.realPromise.then(n=>{r(n.follow(t,e))}).catch(t=>{n(t)})})}followAll(t){return this.realPromise.then(e=>e.followAll(t))}}e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{constructor(t){super("HTTP error "+t.status),this.response=t,this.status=t.status}}e.HttpError=n;class i extends n{constructor(t,e){super(t),this.body=e,this.body.title&&(this.message="HTTP Error "+this.status+": "+this.body.title)}}e.Problem=i,e.default=async function(t){const e=t.headers.get("Content-Type");if(e&&e.match(/^application\/problem\+json/i)){const e=await t.json();return new i(t,e)}return new n(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encode=function(t){return btoa(t)}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(28));r(3);e.OAuth2Helper=class{constructor(t){this.client=new i.default(t.client),this.token=null,this.owner=t.owner}async fetch(t){const e=await this.getToken();t.headers.set("Authorization","Bearer "+e.accessToken);const r=await fetch(t);return 401!==r.status?r:(await this.refreshToken(),t.headers.set("Authorization","Bearer "+this.token.accessToken),fetch(t))}async getToken(){return this.token?this.token:this.refreshToken()}async refreshToken(){return this.token&&this.token.refreshToken?(this.token=await this.token.refresh(),this.token):this.owner?(this.token=await this.client.owner.getToken(this.owner.userName,this.owner.password),this.token):(this.token=await this.client.credentials.getToken(),this.token)}}},function(t,e,r){var n=r(29).Buffer,i=r(2),o=r(30),s=r(34),a="function"==typeof n?function(t){return new n(t).toString("base64")}:window.btoa;t.exports=m;var u={Accept:"application/json, application/x-www-form-urlencoded","Content-Type":"application/x-www-form-urlencoded"},h={invalid_request:["The request is missing a required parameter, includes an","invalid parameter value, includes a parameter more than","once, or is otherwise malformed."].join(" "),invalid_client:["Client authentication failed (e.g., unknown client, no","client authentication included, or unsupported","authentication method)."].join(" "),invalid_grant:["The provided authorization grant (e.g., authorization","code, resource owner credentials) or refresh token is","invalid, expired, revoked, does not match the redirection","URI used in the authorization request, or was issued to","another client."].join(" "),unauthorized_client:["The client is not authorized to request an authorization","code using this method."].join(" "),unsupported_grant_type:["The authorization grant type is not supported by the","authorization server."].join(" "),access_denied:["The resource owner or authorization server denied the request."].join(" "),unsupported_response_type:["The authorization server does not support obtaining","an authorization code using this method."].join(" "),invalid_scope:["The requested scope is invalid, unknown, or malformed."].join(" "),server_error:["The authorization server encountered an unexpected","condition that prevented it from fulfilling the request.","(This error code is needed because a 500 Internal Server","Error HTTP status code cannot be returned to the client","via an HTTP redirect.)"].join(" "),temporarily_unavailable:["The authorization server is currently unable to handle","the request due to a temporary overloading or maintenance","of the server."].join(" ")};function c(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(null==t[r])throw new TypeError('Expected "'+r+'" to exist')}}function f(t){var e=h[t.error]||t.error_description||t.error;if(e){var r=new Error(e);return r.body=t,r.code="EAUTH",r}}function l(t){return Array.isArray(t)?t.join(" "):y(t)}function p(t,e){return c(t,"clientId","authorizationUri"),t.authorizationUri+"?"+i.stringify(Object.assign({client_id:t.clientId,redirect_uri:t.redirectUri,scope:l(t.scopes),response_type:e,state:t.state},t.query))}function d(t,e){return"Basic "+a(y(t)+":"+y(e))}function y(t){return null==t?"":String(t)}function g(t,e){return{url:t.url,method:t.method,body:Object.assign({},t.body,e.body),query:Object.assign({},t.query,e.query),headers:Object.assign({},t.headers,e.headers)}}function m(t,e){this.options=t,this.request=e||s,this.code=new A(this),this.token=new b(this),this.owner=new w(this),this.credentials=new _(this),this.jwt=new T(this)}function v(t,e){this.client=t,this.data=e,this.tokenType=e.token_type&&e.token_type.toLowerCase(),this.accessToken=e.access_token,this.refreshToken=e.refresh_token,this.expiresIn(Number(e.expires_in))}function w(t){this.client=t}function b(t){this.client=t}function _(t){this.client=t}function A(t){this.client=t}function T(t){this.client=t}m.Token=v,m.prototype.createToken=function(t,e,r,n){var i=Object.assign({},n,"string"==typeof t?{access_token:t}:t,"string"==typeof e?{refresh_token:e}:e,"string"==typeof r?{token_type:r}:r);return new m.Token(this,i)},m.prototype._request=function(t){var e=t.url,r=i.stringify(t.body),n=i.stringify(t.query);return n&&(e+=(-1===e.indexOf("?")?"?":"&")+n),this.request(t.method,e,r,t.headers).then(function(t){var e=function(t){try{return JSON.parse(t)}catch(e){return i.parse(t)}}(t.body),r=f(e);if(r)return Promise.reject(r);if(t.status<200||t.status>=399){var n=new Error("HTTP status "+t.status);return n.status=t.status,n.body=t.body,n.code="ESTATUS",Promise.reject(n)}return e})},v.prototype.expiresIn=function(t){if("number"==typeof t)this.expires=new Date,this.expires.setSeconds(this.expires.getSeconds()+t);else{if(!(t instanceof Date))throw new TypeError("Unknown duration: "+t);this.expires=new Date(t.getTime())}return this.expires},v.prototype.sign=function(t){if(!this.accessToken)throw new Error("Unable to sign without access token");if(t.headers=t.headers||{},"bearer"===this.tokenType)t.headers.Authorization="Bearer "+this.accessToken;else{var e=t.url.split("#"),r="access_token="+this.accessToken,n=e[0].replace(/[?&]access_token=[^&#]/,""),i=e[1]?"#"+e[1]:"";t.url=n+(n.indexOf("?")>-1?"&":"?")+r+i,t.headers.Pragma="no-store",t.headers["Cache-Control"]="no-store"}return t},v.prototype.refresh=function(t){var e=this,r=Object.assign({},this.client.options,t);return this.refreshToken?this.client._request(g({url:r.accessTokenUri,method:"POST",headers:Object.assign({},u,{Authorization:d(r.clientId,r.clientSecret)}),body:{refresh_token:this.refreshToken,grant_type:"refresh_token"}},r)).then(function(t){return e.client.createToken(Object.assign({},e.data,t))}):Promise.reject(new Error("No refresh token"))},v.prototype.expired=function(){return Date.now()>this.expires.getTime()},w.prototype.getToken=function(t,e,r){var n=this,i=Object.assign({},this.client.options,r);return this.client._request(g({url:i.accessTokenUri,method:"POST",headers:Object.assign({},u,{Authorization:d(i.clientId,i.clientSecret)}),body:{scope:l(i.scopes),username:t,password:e,grant_type:"password"}},i)).then(function(t){return n.client.createToken(t)})},b.prototype.getUri=function(t){return p(Object.assign({},this.client.options,t),"token")},b.prototype.getToken=function(t,e){var r=Object.assign({},this.client.options,e),n="object"==typeof t?t:o.parse(t,!0),s=o.parse(r.redirectUri);if("string"==typeof n.pathname&&n.pathname!==s.pathname)return Promise.reject(new TypeError("Redirected path should match configured path, but got: "+n.pathname));if(!n.hash&&!n.search)return Promise.reject(new TypeError("Unable to process uri: "+t));var a=Object.assign({},"string"==typeof n.query?i.parse(n.query):n.query||{},"string"==typeof n.hash?i.parse(n.hash.substr(1)):n.hash||{}),u=f(a);return u?Promise.reject(u):null!=r.state&&a.state!==r.state?Promise.reject(new TypeError("Invalid state: "+a.state)):Promise.resolve(this.client.createToken(a))},_.prototype.getToken=function(t){var e=this,r=Object.assign({},this.client.options,t);return c(r,"clientId","clientSecret","accessTokenUri"),this.client._request(g({url:r.accessTokenUri,method:"POST",headers:Object.assign({},u,{Authorization:d(r.clientId,r.clientSecret)}),body:{scope:l(r.scopes),grant_type:"client_credentials"}},r)).then(function(t){return e.client.createToken(t)})},A.prototype.getUri=function(t){return p(Object.assign({},this.client.options,t),"code")},A.prototype.getToken=function(t,e){var r=this,n=Object.assign({},this.client.options,e);c(n,"clientId","accessTokenUri");var s="object"==typeof t?t:o.parse(t,!0);if("string"==typeof n.redirectUri&&"string"==typeof s.pathname&&s.pathname!==o.parse(n.redirectUri).pathname)return Promise.reject(new TypeError("Redirected path should match configured path, but got: "+s.pathname));if(!s.query)return Promise.reject(new TypeError("Unable to process uri: "+t));var a="string"==typeof s.query?i.parse(s.query):s.query||{},h=f(a);if(h)return Promise.reject(h);if(null!=n.state&&a.state!==n.state)return Promise.reject(new TypeError("Invalid state: "+a.state));if(!a.code)return Promise.reject(new TypeError("Missing code, unable to request token"));var l=Object.assign({},u),p={code:a.code,grant_type:"authorization_code",redirect_uri:n.redirectUri};return n.clientSecret?l.Authorization=d(n.clientId,n.clientSecret):p.client_id=n.clientId,this.client._request(g({url:n.accessTokenUri,method:"POST",headers:l,body:p},n)).then(function(t){return r.client.createToken(t)})},T.prototype.getToken=function(t,e){var r=this,n=Object.assign({},this.client.options,e),i=Object.assign({},u);return c(n,"accessTokenUri"),n.clientId&&(i.Authorization=d(n.clientId,n.clientSecret)),this.client._request(g({url:n.accessTokenUri,method:"POST",headers:i,body:{scope:l(n.scopes),grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:t}},n)).then(function(t){return r.client.createToken(t)})}},function(t,e){},function(t,e,r){"use strict";var n=r(31),i=r(33);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=w,e.resolve=function(t,e){return w(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?w(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=w(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(h),f=["%","/","?",";","#"].concat(c),l=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(2);function w(t,e,r){if(t&&i.isObject(t)&&t instanceof o)return t;var n=new o;return n.parse(t,e,r),n}o.prototype.parse=function(t,e,r){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",h=t.split(a);h[0]=h[0].replace(/\\/g,"/");var w=t=h.join(a);if(w=w.trim(),!r&&1===t.split("#").length){var b=u.exec(w);if(b)return this.path=w,this.href=w,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var _=s.exec(w);if(_){var A=(_=_[0]).toLowerCase();this.protocol=A,w=w.substr(_.length)}if(r||_||w.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===w.substr(0,2);!T||_&&g[_]||(w=w.substr(2),this.slashes=!0)}if(!g[_]&&(T||_&&!m[_])){for(var x,E,k=-1,j=0;j<l.length;j++){-1!==(O=w.indexOf(l[j]))&&(-1===k||O<k)&&(k=O)}-1!==(E=-1===k?w.lastIndexOf("@"):w.lastIndexOf("@",k))&&(x=w.slice(0,E),w=w.slice(E+1),this.auth=decodeURIComponent(x)),k=-1;for(j=0;j<f.length;j++){var O;-1!==(O=w.indexOf(f[j]))&&(-1===k||O<k)&&(k=O)}-1===k&&(k=w.length),this.host=w.slice(0,k),w=w.slice(k),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var R=this.hostname.split(/\./),S=(j=0,R.length);j<S;j++){var U=R[j];if(U&&!U.match(p)){for(var C="",I=0,B=U.length;I<B;I++)U.charCodeAt(I)>127?C+="x":C+=U[I];if(!C.match(p)){var M=R.slice(0,j),q=R.slice(j+1),L=U.match(d);L&&(M.push(L[1]),q.unshift(L[2])),q.length&&(w="/"+q.join(".")+w),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=n.toASCII(this.hostname));var Y=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+Y,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==w[0]&&(w="/"+w))}if(!y[A])for(j=0,S=c.length;j<S;j++){var D=c[j];if(-1!==w.indexOf(D)){var N=encodeURIComponent(D);N===D&&(N=escape(D)),w=w.split(D).join(N)}}var F=w.indexOf("#");-1!==F&&(this.hash=w.substr(F),w=w.slice(0,F));var H=w.indexOf("?");if(-1!==H?(this.search=w.substr(H),this.query=w.substr(H+1),e&&(this.query=v.parse(this.query)),w=w.slice(0,H)):e&&(this.search="",this.query={}),w&&(this.pathname=w),m[A]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){Y=this.pathname||"";var $=this.search||"";this.path=Y+$}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+n},o.prototype.resolve=function(t){return this.resolveObject(w(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var r=new o,n=Object.keys(this),s=0;s<n.length;s++){var a=n[s];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),h=0;h<u.length;h++){var c=u[h];"protocol"!==c&&(r[c]=t[c])}return m[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!m[t.protocol]){for(var f=Object.keys(t),l=0;l<f.length;l++){var p=f[l];r[p]=t[p]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||g[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var y=r.pathname||"",v=r.search||"";r.path=y+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var w=r.pathname&&"/"===r.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=b||w||r.host&&t.pathname,A=_,T=r.pathname&&r.pathname.split("/")||[],x=(d=t.pathname&&t.pathname.split("/")||[],r.protocol&&!m[r.protocol]);if(x&&(r.hostname="",r.port=null,r.host&&(""===T[0]?T[0]=r.host:T.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),_=_&&(""===d[0]||""===T[0])),b)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,T=d;else if(d.length)T||(T=[]),T.pop(),T=T.concat(d),r.search=t.search,r.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(x)r.hostname=r.host=T.shift(),(P=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=P.shift(),r.host=r.hostname=P.shift());return r.search=t.search,r.query=t.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!T.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=T.slice(-1)[0],k=(r.host||t.host||T.length>1)&&("."===E||".."===E)||""===E,j=0,O=T.length;O>=0;O--)"."===(E=T[O])?T.splice(O,1):".."===E?(T.splice(O,1),j++):j&&(T.splice(O,1),j--);if(!_&&!A)for(;j--;j)T.unshift("..");!_||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),k&&"/"!==T.join("/").substr(-1)&&T.push("");var P,R=""===T[0]||T[0]&&"/"===T[0].charAt(0);x&&(r.hostname=r.host=R?"":T.length?T.shift():"",(P=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=P.shift(),r.host=r.hostname=P.shift()));return(_=_||r.host&&T.length)&&!R&&T.unshift(""),T.length?r.pathname=T.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){(function(t,n){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof n&&n;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,h=36,c=1,f=26,l=38,p=700,d=72,y=128,g="-",m=/^xn--/,v=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=h-c,A=Math.floor,T=String.fromCharCode;function x(t){throw new RangeError(b[t])}function E(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function k(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+E((t=t.replace(w,".")).split("."),e).join(".")}function j(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function O(t){return E(t,function(t){var e="";return t>65535&&(e+=T((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=T(t)}).join("")}function P(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:h}function R(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function S(t,e,r){var n=0;for(t=r?A(t/p):t>>1,t+=A(t/e);t>_*f>>1;n+=h)t=A(t/_);return A(n+(_+1)*t/(t+l))}function U(t){var e,r,n,i,o,s,a,l,p,m,v=[],w=t.length,b=0,_=y,T=d;for((r=t.lastIndexOf(g))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&x("not-basic"),v.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<w;){for(o=b,s=1,a=h;i>=w&&x("invalid-input"),((l=P(t.charCodeAt(i++)))>=h||l>A((u-b)/s))&&x("overflow"),b+=l*s,!(l<(p=a<=T?c:a>=T+f?f:a-T));a+=h)s>A(u/(m=h-p))&&x("overflow"),s*=m;T=S(b-o,e=v.length+1,0==o),A(b/e)>u-_&&x("overflow"),_+=A(b/e),b%=e,v.splice(b++,0,_)}return O(v)}function C(t){var e,r,n,i,o,s,a,l,p,m,v,w,b,_,E,k=[];for(w=(t=j(t)).length,e=y,r=0,o=d,s=0;s<w;++s)(v=t[s])<128&&k.push(T(v));for(n=i=k.length,i&&k.push(g);n<w;){for(a=u,s=0;s<w;++s)(v=t[s])>=e&&v<a&&(a=v);for(a-e>A((u-r)/(b=n+1))&&x("overflow"),r+=(a-e)*b,e=a,s=0;s<w;++s)if((v=t[s])<e&&++r>u&&x("overflow"),v==e){for(l=r,p=h;!(l<(m=p<=o?c:p>=o+f?f:p-o));p+=h)E=l-m,_=h-m,k.push(T(R(m+E%_,0))),l=A(E/_);k.push(T(R(l,0))),o=S(r,b,n==i),r=0,++n}++r,++e}return k.join("")}a={version:"1.4.1",ucs2:{decode:j,encode:O},decode:U,encode:C,toASCII:function(t){return k(t,function(t){return v.test(t)?"xn--"+C(t):t})},toUnicode:function(t){return k(t,function(t){return m.test(t)?U(t.slice(4).toLowerCase()):t})}},void 0===(i=function(){return a}.call(e,r,e,t))||(t.exports=i)}()}).call(this,r(32)(t),r(7))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e){t.exports=function(t,e,r,n){return new Promise(function(i,o){var s=new window.XMLHttpRequest;s.open(t,e),s.onload=function(){return i({status:s.status,body:s.responseText})},s.onerror=s.onabort=function(){return o(new Error(s.statusText||"XHR aborted: "+e))},Object.keys(n).forEach(function(t){s.setRequestHeader(t,n[t])}),s.send(r)})}},function(t){t.exports={name:"ketting",version:"2.4.1",description:"Opiniated HATEAOS / Rest client.",main:"dist/index.js",scripts:{test:"make test",prepublishOnly:"make build",build:"make build"},repository:{type:"git",url:"git+https://github.com/evert/ketting.git"},keywords:["rest","hypermedia","client","http","hateoas","hal"],author:"Evert Pot",license:"MIT",bugs:{url:"https://github.com/evert/ketting/issues"},homepage:"https://github.com/evert/ketting#readme",files:["dist/","browser/ketting.min.js","browser/ketting.min.js.map"],types:"dist/index.d.ts",dependencies:{"@types/node-fetch":"^2.1.2","client-oauth2":"^4.2.1","http-link-header":"^0.8.0","node-fetch":"^2.2.0","querystring-browser":"^1.0.4",sax:"^1.2.4","uri-template":"^1.0.1"},devDependencies:{"@types/chai":"^4.1.4","@types/http-link-header":"^0.6.2","@types/koa-bodyparser":"^5.0.1","@types/koa-logger":"^3.1.0","@types/koa-static":"^4.0.0","@types/mocha":"^5.2.5","@types/node":"^10.10.1","@types/sax":"^1.0.1","awesome-typescript-loader":"^5.2.1",chai:"^4.1.2",koa:"^2.5.3","koa-bodyparser":"^4.2.1","koa-logger":"^3.2.0","koa-path-match":"^2.0.0","koa-static":"^5.0.0",mocha:"^5.2.0",nyc:"^13.0.1","ts-node":"^7.0.1",tslint:"^5.11.0",typescript:"^3.0.3",webpack:"^4.19.1","webpack-cli":"^3.1.0"},nyc:{extension:[".ts"]}}}]);
//# sourceMappingURL=ketting.min.js.map